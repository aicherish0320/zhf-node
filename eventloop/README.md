## EventLoop

事件环：为了实现 js 的异步概念
EventLoop 解决的是：js 执行时可能会调用异步方法，这些方法是怎样调度执行的

## 渲染进程

- GUI 渲染进程（渲染页面的）
- JS 引擎县城，它和页面渲染时互斥
- 事件触发线程，独立的线程 EventLoop
- 事件 click setTimeout ajax 也是一个独立线程

## 事件循环的过程

1. js 执行的时候，会从上到下执行，遇到函数会创建执行上下文放入到执行栈中，执行完毕后出栈；执行时 kennel 会发生异步事件，内部会调用浏览器 API

2. 当我们执行上下文栈都执行完毕后，等会可能 API 执行完成或者时间到达，会被我放入到事件队列中，

3. 不停的扫描队列，将队列里的任务拿出来放到上下文执行栈中执行；事件循环线程专门来干这件事，检测当前执行栈是否为空，如果为空，从事件队列中取出一个来执行

4. 当代码执行时还会有一些任务，promise 为例，微任务，每次执行宏任务的时候，都会单独创建一个微任务“队列”

5. 微任务在执行完毕后，浏览器会检测是否要重新渲染，浏览器有刷新频率，16.6ms

> 总结：每次循环一次都会执行一个宏任务，并清空对应的微任务队列，每次刷新完毕后，都要看是否要渲染，如果需要渲染才渲染
